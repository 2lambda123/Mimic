#:kivy 1.8
#:import kivy kivy
#:import win kivy.core.window
<Orbit_Screen>:
    name: 'orbit'
    FloatLayout:
        id: orbit_layout
        #size: (100,100)
        #size_hint: (None,None)
        Image:
            id: Orbit_background
            source: '/home/pi/Mimic/Pi/imgs/orbit/OrbitBase.png'
            allow_stretch: False
        AsyncImage:
            id: OrbitMap
            source: '/home/pi/Mimic/Pi/imgs/orbit/map.jpg'
            pos_hint: {"center_x": 0.5, "center_y": 0.56}
            size: (500,300)
            #size_hint_y: 0.598
            size_hint: (None,None)
            allow_stretch: False
            keep_ratio: True
        Widget:
            id: mylocation
            col: (0,0,1,1)
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint: '0.01dp', '0.02dp'
            canvas:
                Color:
                    rgba: self.col
                Ellipse:
                    pos: self.pos
                    size: self.size
        Widget:
            id: TDRS12
            col: (0,0,0,0)
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint: '0.01dp', '0.02dp'
            canvas:
                Color:
                    rgba: self.col
                Ellipse:
                    pos: self.pos
                    size: self.size
        Widget:
            id: TDRS6
            col: (0,0,0,0)
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint: '0.01dp', '0.02dp'
            canvas:
                Color:
                    rgba: self.col
                Ellipse:
                    pos: self.pos
                    size: self.size
        Label:
            id: TDRSeLabel
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            text: 'TDRS-East'
            markup: True
            color: 1,1,1
            font_size: 15
        Widget:
            id: TDRS11
            col: (0,0,0,0)
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint: '0.01dp', '0.02dp'
            canvas:
                Color:
                    rgba: self.col
                Ellipse:
                    pos: self.pos
                    size: self.size
        Widget:
            id: TDRS10
            col: (1,1,1,1)
            #pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint: '0.01dp', '0.02dp'
            canvas:
                PushMatrix:
                Translate:
                    xy: (OrbitMap.x + (OrbitMap.width - OrbitMap.norm_image_size[0])/2, OrbitMap.y + (OrbitMap.height - OrbitMap.norm_image_size[1])/2)
                Scale:
                    origin: 0,0
                    x: OrbitMap.norm_image_size[0] / OrbitMap.texture_size[0] if OrbitMap.texture_size[0] > 0 else 1
                    y: OrbitMap.norm_image_size[1] / OrbitMap.texture_size[1] if OrbitMap.texture_size[1] > 0 else 1
                Color:
                    rgba: self.col
                Ellipse:
                    pos: self.pos
                    size: self.size
                Line:    # test diagonal line 2
                    points: (0, OrbitMap.texture_size[1], OrbitMap.texture_size[0], 0)
                    joint: "round"
                PopMatrix:
        Label:
            id: TDRSwLabel
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            text: 'TDRS-West'
            markup: True
            color: 1,1,1
            font_size: 15
        Widget:
            id: ZOE
            col: (0,0,0,0)
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint: '0.06dp', '0.38dp'
            opacity: 0.2
            canvas:
                Color:
                    rgba: self.col
                Ellipse:
                    pos: self.pos
                    size: self.size
        Label:
            id: ZOElabel
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            text: 'ZOE'
            markup: True
            color: 1,1,1
            font_size: 15
        Widget:
            id: TDRS7
            col: (0,0,0,0)
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            size_hint: '0.01dp', '0.02dp'
            canvas:
                Color:
                    rgba: self.col
                Ellipse:
                    id: TDRSz
                    pos: self.pos
                    size: self.size
        Label:
            id: TDRSzLabel
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            text: 'TDRS-Z'
            markup: True
            color: 1,1,1
            font_size: 15
        Image:
            id: OrbitISStiny
            source: '/home/pi/Mimic/Pi/imgs/orbit/OrbitYellowISSicon.png'
            keep_ratio: False
            allow_stretch: True
            size_hint: 0.07,0.07
            pos_hint: {"center_x": 0.888, "center_y": 0.888}
        Label:
            id: dailyorbit
            pos_hint: {"center_x": 0.08, "center_y": 0.7}
            text: ''
            markup: True
            color: 1,1,1
            font_size: 50
        Label:
            id: totalorbits
            pos_hint: {"center_x": 0.08, "center_y": 0.5}
            text: ''
            markup: True
            color: 1,1,1
            font_size: 26
        Label:
            id: iss_next_pass1
            pos_hint: {"center_x": 0.92, "center_y": 0.6}
            text: '-----'
            size_hint_y: None
            size_hint_x: 0.1
            halign: 'center'
            text_size: self.width, None
            markup: True
            color: 1,1,1
            font_size: 16
        Label:
            id: iss_next_pass2
            pos_hint: {"center_x": 0.92, "center_y": 0.55}
            text: '-----'
            size_hint_y: None
            size_hint_x: 0.1
            halign: 'center'
            text_size: self.width, None
            markup: True
            color: 1,1,1
            font_size: 16
        Label:
            id: countdown
            pos_hint: {"center_x": 0.92, "center_y": 0.5}
            text: '-----'
            size_hint_y: None
            size_hint_x: 0.1
            halign: 'center'
            text_size: self.width, None
            markup: True
            color: 1,1,1
            font_size: 16
        Label:
            id: latitude
            pos_hint: {"center_x": 0.12, "center_y": 0.22}
            text: '0.00'
            markup: True
            color: 1,1,1
            font_size: 16
        Label:
            id: longitude
            pos_hint: {"center_x": 0.13, "center_y": 0.185}
            text: '0.00'
            markup: True
            color: 1,1,1
            font_size: 16
        Button:
            size_hint: 0.1,0.11
            pos_hint: {"center_x": 0.9375, "center_y": 0.082}
            background_normal: '/home/pi/Mimic/Pi/imgs/eva/BackButton.png'
            text: ''
            font_size: 30
            on_release: app.root.current = 'mimic'
        Image:
            id: signal
            source: "/home/pi/Mimic/Pi/imgs/signal/pulse-transparent.zip"
            size_hint_y: 0.15
            anim_delay: 0.12
            anim_loop: 0
            keep_ratio: True
            pos_hint: {"center_x": 0.05, "center_y": 0.07}
