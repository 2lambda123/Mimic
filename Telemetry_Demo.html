<body>
<table border="1" cellpadding="5" cellspacing="5" bordercolor="black" width="400">
	<tr>
		<th></th>
		<th>Telemetry</th>
	</tr>
	<tr>
		<td align="center" >PSARJ Angle</td>
		<td align="center" id="S0000004"></td>
	</tr>
	<tr>
		<td align="center" >SSARJ Angle</td>
		<td align="center" id="S0000003"></td>
	</tr>
	<tr>
		<td align="center" >PTRRJ Angle</td>
		<td align="center" id="S0000002"></td>
	</tr>
	<tr>
		<td align="center" >STRRJ Angle</td>
		<td align="center"  id="S0000001"></td>
	</tr>
	<tr>
		<td align="center" >1B Beta Angle</td>
		<td align="center"  id="S6000008"></td>
	</tr>
	<tr>
		<td align="center" >3B Beta Angle</td>
		<td align="center"  id="S6000007"></td>
	</tr>
	<tr>
		<td align="center" >3A Beta Angle</td>
		<td align="center"  id="S4000008"></td>
	</tr>
	<tr>
		<td align="center" >1A Beta Angle</td>
		<td align="center"  id="S4000007"></td>
	</tr>
	<tr>
		<td align="center" >2A Beta Angle</td>
		<td align="center"  id="P4000007"></td>
	</tr>
	<tr>
		<td align="center" >4A Beta Angle</td>
		<td align="center"  id="P4000008"></td>
	</tr>
	<tr>
		<td align="center" >4B Beta Angle</td>
		<td align="center"  id="P6000007"></td>
	</tr>
	<tr>
		<td align="center" >2B Beta Angle</td>
		<td align="center"  id="P6000008"></td>
	</tr>
	<tr>
		<td align="center" >Signal Status?</td>
		<td align="center"  id="AOS"></td>
	</tr>
</table>

<script src="https://demos.lightstreamer.com/commons/require.js"></script>
<script src="https://demos.lightstreamer.com/commons/lightstreamer.js"></script>
<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>

<script>


require(["LightstreamerClient","Subscription"],function(LightstreamerClient,Subscription) 
{
	var client = new LightstreamerClient("https://push.lightstreamer.com","ISSLIVE");
	client.connect();
 
	var sub = new Subscription("MERGE",["S0000004","S0000003","S0000002","S0000001","S6000008","S6000007","S4000008","S4000007","P4000007","P4000008","P6000007","P6000008"],["Value"]);
	
	var timeSub = new Subscription('MERGE', 'TIME_000001', ['Status.Class']);
	
	client.subscribe(sub);
	
	var AOS;
	var PSARJ;
	var SSARJ;
	var PTRRJ;
	var STRRJ;
	var Beta1A;
	var Beta1B;
	var Beta2A;
	var Beta2B;
	var Beta3A;
	var Beta3B;
	var Beta4A;
	var Beta4B;
	var PSARJ1 = 0.00;
	
	//console.log(sub.getItemName())
	
	sub.addListener({
		onItemUpdate: function(update) 
		{
			//var index = update.getValue("Value");
			$("#"+update.getItemName()).text(update.getValue("Value"));
			
			switch (update.getItemName()){
			  case "S0000004":
				PSARJ = update.getValue("Value");
				PSARJ1 = PSARJ.toFixed(4);
				console.log("PSARJ: " + PSARJ1)
				//console.log(update)
				break;
			  case "S0000003":
				SSARJ = update.getValue("Value");
				break;
			  case "S0000002":
				PTRRJ = update.getValue("Value");
				break;
			  case "S0000001":
				STRRJ = update.getValue("Value");
				break;
			  case "S6000008":
				Beta1B = update.getValue("Value");
				break;
			  case "S6000007":
				Beta3B = update.getValue("Value");
				break;
			  case "S4000008":
				Beta3A = update.getValue("Value");
				break;
			  case "S4000007":
				Beta1A = update.getValue("Value");
				break;
			  case "P4000007":
				Beta2A = update.getValue("Value");
				break;
			  case "P4000008":
				Beta4A = update.getValue("Value");
				break;
			  case "P6000007":
				Beta4B = update.getValue("Value");
				break;
			  case "P6000008":
				Beta2B = update.getValue("Value");
				break;
			} 
		}
	});
	
	client.subscribe(timeSub);
	
	timeSub.addListener({

	  onItemUpdate: function (update) {

		var status = update.getValue('Status.Class');
		//console.log(status)
		if (status === '24') 
		{
		  console.log("Signal Acquired!")
		  AOS = "Siqnal Acquired!!";
	      document.getElementById("AOS").innerHTML = AOS;
		  document.getElementById("AOS").bgColor = '#008000';
		}

		else 
		{
		  console.log("Signal Lost!")
		  AOS = "Signal Lost";
	      document.getElementById("AOS").innerHTML = AOS;
		  document.getElementById("AOS").bgColor = '#FF0000';
		} 
	  }
	});
	
	//unix_timestamp = USLAB000084;
	//console.log(USLAB000084);
	
});



</script>
</body>
